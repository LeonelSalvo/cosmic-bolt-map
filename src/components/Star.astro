---
interface Props {
  x: number;
  y: number;
  label: string;
  level: number;
  size?: number;
}

const { x, y, label, level, size = 4 } = Astro.props;
const opacity = Math.max(0.2, 1 - level * 0.2);
---

<g class="star-group" transform={`translate(${x},${y})`} style={`--star-opacity: ${opacity}`}>
  <circle class="star" r={size} />
  <text dy="20" text-anchor="middle">{label}</text>
</g>

<style>
  .star {
    fill: #fff;
    filter: url(#glow);
    animation: twinkle 1.5s ease-in-out infinite alternate;
    opacity: var(--star-opacity);
  }

  .star-group text {
    fill: #fff;
    font-size: 12px;
    opacity: calc(var(--star-opacity) * 0.8);
  }

  @keyframes twinkle {
    from {
      opacity: calc(var(--star-opacity) * 0.4);
      r: 3;
    }
    to {
      opacity: var(--star-opacity);
      r: 5;
    }
  }
</style>